---
title: "Setting up R"
pagetitle: "Setting up R"
output:
  html_document:
    code_folding: show # allows toggling of showing and hiding code. Remove if not using code.
    code_download: true # allows the user to download the source .Rmd file. Remove if not using code.
    includes:
      after_body: footer.html # include a custom footer.
    toc: true
    toc_depth: 3
    toc_float:
      collapsed: false
      smooth_scroll: false
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(message = FALSE, warnings = FALSE)
```

## Introduction

:::intro
RStudio is a program that helps you write and run R code more easily, especially for working with data, making graphs, and doing statistics.
:::

In this tutorial, we will:

- Get familiarized with the RStudio interface
- Learn how to set the working directory
- Identify the types of documents we can create in R Studio
- Create an R script to start our work
- 

## RStudio Interface

When we launch RStudio for the first time, we notice three main panels or quadrants: 

![](images/day2_RStudio_3panel.png)

Once we open a document, the interface will show four main panels:

![](images/day2_RStudio_4panel.png)

### 1 - Top left panel
#### Files and scripts (source window or code editor)

This is your code editor, where you write, save, and run R scripts (.R), RMarkdown documents (.Rmd), or other file types.

### 2 - Bottom left panel
#### R console and terminal

This is the interactive R console, where code is executed immediately. You can:

 - Type and run commands interactively (great for testing small bits of code).
 - View outputs, error messages, and warnings in real time.
 - Switch to the Terminal tab for system-level commands.

### 3 - Top right panel
#### Objects, history, environment, tutorial and connections

This area lets you track what’s happening in your R session.

It has different tabs for different actions: 

 - **Environment:** See all objects (like data frames, functions, variables) currently in memory.
 - **History:** View all commands you’ve previously run.
 - **Connections:** Manage database connections.
 - **Tutorial:** View built-in interactive tutorials (from the learnr package).

### 4 - Bottom right panel
#### Tree of folders, plots, packages, help, viewer

This panel contains various tools and outputs:

 - **Files:** Navigate your folder structure and open scripts.
 - **Plots:** View visualizations generated by your code.
 - **Packages:** Install, load, or update R packages.
 - **Help:** Search R documentation (`?function_name` shows here).
 - **Viewer:** View HTML content, like R Markdown outputs or Shiny apps.

## R Projects 

### Setting working directory

Most R tutorials and books teach the function `setwd()` for setting the working directory. This function manually sets the working directory during an R session. It tells R where to look for files and where to save outputs just for that session.

But here’s the problem...

Using `setwd()` can break your code when:

 - Someone else tries to run it on their machine.
 - You move your project folder.
 - You're running your code on a server or in cloud environments like RStudio Cloud.

Since file paths are hardcoded and depend on your machine, **it's not reproducible**.

### Create an R Project

An R Project is a feature in RStudio (and supported in base R too) that provides a self-contained working environment. When you create an R Project it creates a .Rproj file in a folder and that folder becomes the root directory of your project. Every time you open the project (via the .Rproj file), R automatically sets the working directory to that folder. You can reference files relative to the project root — no need to hardcode file paths.

This is super useful when you're working on multiple analyses, sharing code with collaborators, or version-controlling with Git. **It is a good practice for reproducible research**

To create an R Project, select File > New Project

![](images/day2_CreateProject.gif)


## Types of files in R

There are two main types of files we can create in R studio to edit our code (R script files `.R` and RMarkdown files `.Rmd`)

The R script file (`.R`) is a plain text file that contains R code only. Use it when you want to write and run code line-by-line, such as for data cleaning, analysis, or function building. It's good for experimenting, scripting, and running code interactively. It's also good for sharing code with other researchers.

The RMarkdown file (`.Rmd`) has a mix of R code and written explanations, using Markdown formatting.  It can be used to create dynamic, reproducible reports that can be knitted into HTML, PDF, or Word documents.It's great for homework, research reports, dashboards, or combining narrative with code.

For the purposes of this program we'll be using R scripts, but if you're interested in learning more about RMarkdown, check out:

* <a href="https://rmarkdown.rstudio.com/lesson-8.html">RMarkdown lesson from RStudio</a>
* <a href="https://bookdown.org/yihui/rmarkdown/">RMarkdown definitive guide</a> 

<br>

To create an R script file, select File > New File > R Script

![](images/block3_create-r-script.gif)


## Literate Programming in R
As mentioned in the session on *Reproducible Research: Moving from Excel to Scripting*, we talked about the idea of literate programming as a framework that provides a human-language explanation of how a script works in combination with the script itself.  We'll see more of this in action as we get into more scripting in this and the coming sessions, but a way to add plain-language to your script involved putting a `#` in front of text, which R (and other programming languages) will recognize as human language and separate from scripting.  Using the `#` to do this is called **commented code**, as is integral in creating reproducible code.

**A simple example**

```{r, results = FALSE}
# This is a human language explanation of the code below, which is calculating 2 + 2
2 + 2
```


## Your Turn! 

:::question
Create your first RProject. Let's figure out what we should call it!
:::

:::question
Create your first R script file. 
:::


## Easing Into R

### R as a Calculator

A good starting place for learning R is utilizing one of its most basic functions, which is that of a calculator.  As mentioned above, there are four panels within RStudio, and to begin, let's look at how this works in the R Console (bottom left panel).

#### Adding Numbers

You can add numbers using the plus sign `+`:
```{r, results = FALSE}
2 + 2
```


#### Subtracting Numbers

You can subtract numbers using a hyphen `-`:
```{r, results = FALSE}
10 -4
```


#### Dividing Numbers

You can divide numbers using a slash `/`:
```{r, results = FALSE}
20/4
```


#### Multiplying Numbers

You can multiply numbers using the star `*`:
```{r, results = FALSE}
10 * 10
```

<br>

:::note

**A quick note on the R console**

As you can see from the actions above, the R console can be used as a place to type very small calculations or actions.  However, a big draw back of using the console is that you can't save the calculations that you are creating, and there is no way to add comments to your code.  This is why we use R script files, as they allow us to keep track of everything that we're doing in R with sufficient documentation for others (and yourself!) to interpret.

:::


### Working in an R Script File

Let's move to the R script file we have just created that is located in the top left panel.  Let's first try to re-run some of the mathematical calculations we ran above, but this time in the script:

```{r, results = FALSE}
2 + 2
10 - 4
20/4
10 * 10
```

Did it work?

Unless you have previous experience with R, or in you got quite clever with using a search engine, you will have noticed that R won't simply run commands in a script when you press the `enter/return` button. This is because the R script is allowing you to freely type, edit, and adjust your code before it goes ahead and deploys it (another advantage over using the console).  

#### Running Code in an R Script

There are a few different ways that you can run code in your R script:

1) **Point-and-click**: In the top right of the RStudio screen, you will see a button that says `Run`.  If you click on it, RStudio will run the line/chunk of code where your cursor is located.  If your cursor is above a line of code, it will run the line below it, but if your cursor is below the code, it won't run anything.  You can also highlight multiple lines of code and press `Run`, and they will be run consecutively 

![](images/block3_run-r-script.gif)

2) **Keyboard commands**: There are two main ways that you can use keyboard commands to code in R scripts:

  * `Ctrl + Enter` (Windows) / `Command + RETURN` (Mac) - will run a single line/chunk of code that your cursor is on
  * `Ctrl + Shift + Enter` (Window) / `Command + Shift + Return` (Mac) - will run all the code in your R script, beginning at the top.
  


 
:::question

-Click on the save button in the top left panel. Make sure you are in the correct folder. Save the file as '`script_js_timeuse_2025.Rmd`

-Click the knit icon at the top of your code editor to preview your formatted file in .html
:::

We will continue adding information to this RMarkdown file later today and the rest of the week.





