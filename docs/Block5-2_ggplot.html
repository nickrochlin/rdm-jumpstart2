<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Visualization with ggplot</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KSGZ4ESKQ3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  
  gtag('config', 'G-KSGZ4ESKQ3');
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">RDM Jumpstart</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 1
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block1_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block1-1_Intro-RDM.html">Introduction to Research Data Management</a>
    </li>
    <li>
      <a href="Block1-2_Intro-DMP.html">Introduction to Data Management Plans</a>
    </li>
    <li>
      <a href="Block1-3_OSF.html">Introduction to OSF</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block2_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block2-1_Files-and-Folders.html">Organizing Files and Folders</a>
    </li>
    <li>
      <a href="Block2-2_Naming-Conventions.html">Naming Conventions and Folder Structure</a>
    </li>
    <li>
      <a href="Block2-3_Documentation.html">Documentation</a>
    </li>
    <li>
      <a href="Block2-4_Documentation-in-Action.html">Documentation in Action</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 3
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block3_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block3-1_Excel-to-R.html">Reproducible Research and Moving from Excel to Scripting</a>
    </li>
    <li>
      <a href="Block3-2_Intro-to-R.html">Introduction to R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 4
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block4_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block4-1_File-Paths.html">File and Directory Paths</a>
    </li>
    <li>
      <a href="Block4-2_First-Steps.html">First Steps in R</a>
    </li>
    <li>
      <a href="Block4-3_Data-Types.html">Data Types and Structures in R</a>
    </li>
    <li>
      <a href="Block4-4_Updating-Documentation.html">Updating Documentation</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 5
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block5_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block5-1_Viz-Types.html">Types of Visualizations</a>
    </li>
    <li>
      <a href="Block5-2_ggplot.html">Visualizations with ggplot</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Block 6
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block6_Overview.html">Overview</a>
    </li>
    <li>
      <a href="Block6-1_Sharing-and-Deposit.html">Sharing and Depositing Data</a>
    </li>
    <li>
      <a href="Block6-2_DMP-wrap.html">DMP and Project Wrap-Up</a>
    </li>
    <li>
      <a href="Block6-3_Borealis.html">Borealis Deposit</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Bonus Blocks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Block7_Bonus_Filter-and-Select.html">R: Filter and Select</a>
    </li>
    <li>
      <a href="Block7_Bonus_Saving-Output.html">R: Saving Outputs</a>
    </li>
    <li>
      <a href="Block7_Bonus_Troubleshooting.html">R: Troubleshooting</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Extras
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Resources</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="codeOfConduct.html">Code of Conduct</a>
        </li>
        <li>
          <a href="Block7_EXT-RCheatsheet.html">R Cheatsheet</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Roadmaps</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-RDMRoadmap.html">RDM Roadmap</a>
        </li>
        <li>
          <a href="Block7_EXT-CRRoadmap.html">Reproducible Roadmap</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Concetps in Reproduciblity</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-BaseRtidyverse.html">Base R &amp; Tidyverse</a>
        </li>
        <li>
          <a href="Block7_EXT-ScriptsNotebooks.html">Scripts &amp; Notebooks</a>
        </li>
        <li>
          <a href="Block7_EXT-idePaths.html">IDEs &amp; Relative Paths</a>
        </li>
        <li>
          <a href="Block7_EXT-ChallengesToRDM.html">Challenges to Good RDM Practices</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Additional Content</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-dd.html">Creating a data dictionary</a>
        </li>
        <li>
          <a href="Block7_EXT-dirsFiles.html">Directories and files</a>
        </li>
      </ul>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Setup</a>
      <ul class="dropdown-menu" role="menu">
        <li>
          <a href="Block7_EXT-DMP-setup.html">DMP Assistant Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-osfSetup.html">OSF Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-RRStudio.html">R &amp; RStudio Setup</a>
        </li>
        <li>
          <a href="Block7_EXT-Borealis.html">Borealis Setup</a>
        </li>
      </ul>
    </li>
    <li>
      <a href="contributors.html">Contributors</a>
    </li>
    <li>
      <a href="Feedback.html">Feedback</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Visualization with ggplotlot</h1>

</div>


<div id="visualizations-with-ggplot2" class="section level3">
<h3>Visualizations with ggplot2</h3>
<p>Now that we have our data visualization imaginations going, let’s get
into how we can visually represent our data in R.</p>
<p>The go-to package for data visualization in R is
<code>ggplot2</code>, which is part of the tidyverse. You can find more
information about <code>ggplot2</code> on the
<a href="https://ggplot2.tidyverse.org/">tidyverse website</a>.</p>
<p>This package approaches data visualization through “a grammar of
graphics.” In other words, using the same syntax, you can create an
infinite number of data visualizations. Although there are a lot of
functions and components to learn at first, once you understand the
overall structure of building graphics in <code>ggplot2</code>, you can
replicate and expand on this structure to visualize data in an unlimited
number of ways.</p>
</div>
<div id="create-a-new-script" class="section level3">
<h3>Create a New Script</h3>
<p>Let’s start by creating a new script.</p>
<p><img src="images/block3_create-r-script.gif" /></p>
<p>If you have installed the tidyverse, then <code>ggplot2</code> is
included. Otherwise you can install it now. Let’s also load our dataset
for today.</p>
<pre class="r"><code>#install.packages(&quot;ggplot2&quot;)
#library(ggplot2)</code></pre>
<div class="note">
<p>Let’s also load our dataset. For this exercise, we are using a
dataset that is exactly the same as the one that was produced in the
session <strong>Data Types and Structures</strong>, but that has one
extra variable added called <code>isFeelRushed</code>. This variable is
derived from the <code>feelRushed</code> variable, with the number
<code>1</code> indicating that somebody feels rushed, and <code>0</code>
indicating they do not feel rushed. For more information on this
variable and how it was created, see the session <a
href="https://alliance-rdm-gdr.github.io/rdm-jumpstart/3-ACT-3-FilterSelect.html">R:
Filter and Select</a></p>
</div>
<pre class="r"><code>load(&quot;data/block-5_visualization.RData&quot;)</code></pre>
<p>There are many ways to make data visualizations in R; however, other
approaches tend to be more automatic and consequently limit the amount
you can change and adapt your visualization to your needs.
<code>ggplot2</code> works in layers, allowing for maximum control and
flexibility.</p>
<p>Here are some of the most common layers (i.e., functions) used in
<code>ggplot2</code>. Typically you connect these layers using the
<code>+</code> symbol. There is often more than one way to build the
same plot with the <code>ggplot</code> package.</p>
<p><strong>- <code>ggplot()</code>:</strong> how you will start most
plots you build in <code>ggplot2</code>. The rest of the information
goes within this function.</p>
<p><strong>- <code>aes()</code>:</strong> this is the aesthetic mapping
function, in which you can control aesthetic components of the plot. You
can add colors, axis labels, font sizes and more within this function.
Color and shape can be defined both within and outside of the aesthetic
function.</p>
<p><strong>- <code>geom_point()</code>:</strong> used for making a
scatter plot</p>
<p><strong>- <code>geom_line()</code>:</strong> used for adding a line
to a plot</p>
<p><strong>- <code>geom_histogram()</code>:</strong> used for making a
histogram</p>
<p><strong>- <code>geom_col()</code>:</strong> used for making a bar
plot</p>
<p><strong>- <code>xlab</code>, <code>ylab</code>, and
<code>labs(title = )</code>:</strong> used for adding axis labels and an
overall title to plots</p>
<p><strong>- <code>color</code>:</strong> assigns a color to part of the
plot, such as different groups or the data points</p>
<p><strong>- <code>fill</code>:</strong> assigns the interior color of
part of the plot, such as a confidence band or the bars in bar plots</p>
<p><strong>- <code>alpha</code>:</strong> used to change the
transparency of a component of the plot. Useful if you lots of have
overlapping data points or distributions from multiple groups.</p>
<p><strong>- <code>size</code>:</strong> used to set the size of part of
the plot, such as how big the data points or text should be</p>
<p>There are many more data visualization options in <code>ggplot</code>
but to get started today we are going to focus on making a bar plot
(good for categorical data) and a scatter plot (good for continuous
data).</p>
</div>
<div id="basic-bar-plot-counts" class="section level3">
<h3>Basic Bar Plot: Counts</h3>
<p>Let’s make our first plot in R! We are going to slowly add layers,
building up to a box plot representing the number of people in each
group in the <code>isFeelRushed</code> variable.</p>
<p>When creating visualizations, it’s always good to have a sense of the
variables you’re working with. It can be helpful to use the
<code>View()</code> command we discussed in the session <strong>First
Steps in R</strong>:</p>
<pre class="r"><code>View(js_data)</code></pre>
<p>It can also be helpful to have the data dictionary handy, so you know
each variable’s data type and description:</p>
<embed src="images/Block4-2_Dictionary.pdf" width="95%" height="500in" type="application/pdf" />
<p><br></p>
<p>First we create the blank plot on which we will add our data. We
nearly always start with the function <code>ggplot</code> and then
telling the function what dataset to use.</p>
<pre class="r"><code>ggplot(js_data)</code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>This creates our blank canvas.</p>
<p>Next we tell ggplot what variable we want to use and put it in the
<code>aes()</code> function. If you want a bar chart representing the
number of people in each group, you can add just one variable to the
<code>aes()</code> function. We include the <code>as.factor</code>
function around the <code>isFeelRushed</code> variable so it is treated
as a categorical variable for the box plot instead of a numeric
variable.</p>
<pre class="r"><code>ggplot(js_data, aes(x = as.factor(isFeelRushed)))</code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>You now see that the grid represents a scale relevant to that
variable.</p>
<p>Next, we tell ggplot what type of data visualization we want. To
create a bar chart we use the function <code>geom_bar()</code>. To see
how many people are in each of the <code>isFeelRushed</code> groups, we
use the default <code>geom_bar(stat = "count")</code>. Remember that we
connect layers with a <code>+</code> symbol.</p>
<pre class="r"><code>ggplot(js_data, aes(x = as.factor(isFeelRushed))) +
  geom_bar(stat = &quot;count&quot;)</code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>We’ve got a bar chart!</p>
<p>Lastly, let’s add some labels to the x-axis and y-axis to make it
clear what is being plotted.</p>
<pre class="r"><code>ggplot(js_data, aes(x = as.factor(isFeelRushed))) +
  geom_bar(stat = &quot;count&quot;) + 
  xlab(&quot;Feeling Rushed&quot;) +
  ylab (&quot;Number of Participants&quot;) </code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="basic-bar-plot-group-means" class="section level3">
<h3>Basic Bar Plot: Group Means</h3>
<p>Now, let’s see if people who feel rushed tend to work more than
people who do not feel rushed. To represent the mean for each group or
some other variable, you add both an x and a y variable to the
<code>aes()</code> function and use the
<code>geom_bar(stat = "summary")</code>. Note that the Y-axis scale has
now adjusted to a scale that matches the variable we are using (i.e.,
mean number of minutes spent working for each group).</p>
<pre class="r"><code>ggplot(js_data, aes(x = as.factor(isFeelRushed), y = durWork)) +
  geom_bar(stat = &quot;summary&quot;) + 
  xlab(&quot;Feeling Rushed&quot;) +
  ylab (&quot;Average Minutes Working&quot;) </code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="walkthrough">
<ul>
<li>Most plots will start with the <code>ggplot()</code>function</li>
<li>You have to include the object where <code>ggplot()</code> will get
the information for the plot from. In this case, it’s our dataset
<code>js_data</code></li>
<li>Within the <code>aes()</code> function, we identify what the x and y
variables are for this plot</li>
<li>We add layers using the <code>+</code> sign</li>
<li>Next we tell <code>ggplot()</code> what type of plot we are making;
in this case we are creating a bar plot using the function
<code>geom_bar()</code></li>
<li>Then we add what type of statistic we want presented on the plot.
Here we ask for the mean of each group for the variable durWork using
the function <code>geom_bar(stat = "summary")</code></li>
<li>We add a label to the x-axis with
<code>lab("Feeling Rushed")</code></li>
<li>We add the label to the y-axis with
<code>ylab ("Time Working")</code></li>
</ul>
</div>
</div>
<div id="improved-box-plot" class="section level3">
<h3>Improved Box Plot!</h3>
<p>This plot gets the idea across, but we can add more layers and
functions to make more adjustments. See the walkthrough below for how we
made all these changes.</p>
<pre class="r"><code>plotlabels &lt;- c(&quot;Not Rushed&quot;, &quot;Rushed&quot;, &quot;Did Not Respond&quot;)

ggplot(js_data, aes(x = as.factor(isFeelRushed), y = durWork)) +
  geom_bar(stat = &quot;summary&quot;, fill = &quot;#2D5E7F&quot;) + 
  xlab(&quot;Feeling Rushed&quot;) +
  ylab (&quot;Average Minutes Working&quot;) +
  labs(title = &quot;Working and Feeling Rushed&quot;) +
  scale_x_discrete(labels = plotlabels) +
  theme(text = element_text(size = 18),
        axis.text.x = element_text(angle = 25, hjust = 1))</code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="walkthrough">
<ul>
<li>We can change the color of the bars using <code>fill =</code>. Here
we added the specific color using a hex code. But you can also write in
the names of colors such as “blue”.</li>
<li>Using <code>labs(title = "")</code> we added an overall title to the
plot</li>
<li>We probably want to indicate what each category represents, rather
than the “0”, “1” and “NA” labels. To add text labels, we first create
an object with each of those labels in order
(<code>plotlabels &lt;- c("Not Rushed", "Rushed", "Did Not Respond")</code>).
Then in the <code>scale_x_discrete(labels = plotlabels)</code> function
we call to that object we created as the labels for the x-axis. There
are many other ways to adjust the labels for each axis, but this method
works well for a small number of groups.</li>
<li>In the <code>theme()</code> layer you can add many different
specifications. Here we added
<code>text = element_text(size = 18)</code> to make the text size bigger
than the default and made the x-axis labels angled so they fit better
using <code>axis.text.x = element_text(angle = 25, hjust = 1)</code>.
The <code>hjust =</code> adjusts the vertical location of the axis
labels so they don’t overlap with the plot itself. <code>vjust =</code>
can be used to move the labels right and left.</li>
</ul>
</div>
<div class="question">
<p>Try manipulating this plot in some way. Can you change the color of
the bars? What happens if you change <code>angle = 90</code>?</p>
</div>
</div>
<div id="basic-scatter-plot" class="section level3">
<h3>Basic Scatter Plot</h3>
<p>Now let’s make a scatter plot to visualize two continuous variables.
We are going to check if it looks like there is a correlation between
how much time people work (durWork) and how much they sleep
(durSleep).</p>
<pre class="r"><code>ggplot(js_data, aes(durWork, durSleep)) +
  geom_point() +
  geom_smooth() +
  xlab(&quot;Minutes Spent Working&quot;) +
  ylab (&quot;Minutes Spent Sleeping&quot;)</code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div class="walkthrough">
<ul>
<li>Again we start with the <code>ggplot()</code> function, including
telling it to use the dataset <code>js_data</code></li>
<li>In the <code>aes()</code> function we list the x and y variables
(here durWork and durSleep)</li>
<li>The <code>geom_point()</code> function is what makes a scatter
plot</li>
<li>The geom_smooth() is what adds the correlation line to the plot</li>
<li>The <code>xlab()</code> and <code>ylab()</code> add the x-axis and
y-axis labels to the plot</li>
</ul>
</div>
</div>
<div id="improved-scatter-plot" class="section level3">
<h3>Improved Scatter Plot!</h3>
<p>Now let’s add some layers and aesthetic adjustments to improve this
plot.</p>
<pre class="r"><code>ggplot(js_data, aes(durWork, durSleep)) +
  geom_point(color = &quot;#2D5E7F&quot;, alpha = .2) +
  geom_smooth(method = lm, color = &quot;black&quot;) +
  xlab(&quot;Minutes Spent Working&quot;) +
  ylab (&quot;Minutes Spent Sleeping&quot;) +
  scale_x_continuous(breaks = seq(0, 1500, 250)) +
  labs(title = &quot;Association Between Working and Sleeping&quot;) +
  theme(text = element_text(size = 18))</code></pre>
<p><img src="Block5-2_ggplot_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="walkthrough">
<ul>
<li>We can change the color of the data points by adding
<code>color = "#2D5E7F"</code> and change the transparency of the data
points (so you can see where there are overlapping clusters) with the
addition of <code>alpha = .2</code>.</li>
<li>In the <code>geom_smooth()</code> function we changed the method for
calculating the line to be linear (instead of the ggplot default) using
<code>method = lm</code> and adjusted the color of the line with
<code>color =</code>. Remember that you can write hex code numbers or
the names of colors to adjust colors. Make sure both are in quotes to
avoid error messages.</li>
<li>We adjust the x-axis tick marks with the
<code>scale_x_continuous(breaks = seq(0, 1500, 250))</code> part, which
tells R to plot the x-axis on a sequence from 0 to 1500 (this captures
all of the responses in our data), with labels every 250 minutes.</li>
<li>The
<code>labs(title = "Association Between Working and Sleeping")</code>
adds an overall title to the plot</li>
<li>Lastly, <code>theme(text = element_text(size = 18))</code> adjust
the text size</li>
</ul>
</div>
<div class="question">
<p>Try manipulating this plot in some way. Can you make the data points
more and less transparent? Can you change the color of the line? What
happens if the x-axis has labels every 100 minutes?</p>
</div>
</div>
<div id="your-turn" class="section level3">
<h3>Your Turn!</h3>
<div class="note">
<p>For the following questions, the goal is to get you thinking about
the building blocks that go into making a visual. Don’t get too focused
on the finished product right away, and try to think about the
individual steps needed to get you to there. As with any coding task, it
can be very helpful to think of or write each of the steps down in plain
English, then work through each one.</p>
<p>As a final note, a <strong>huge</strong> part of learning how to code
is using search engines, and there is a ton of documentation out there
to help you. This also relates back to putting things into
plain-language steps, because being able to clearly articulate your
goals is synonymous with using good search terms.</p>
<p>The data dictionary will also be an asset in working through this
exercise:</p>
<embed src="images/Block4-2_Dictionary.pdf" width="95%" height="500in" type="application/pdf" />
<p>Good luck!</p>
</div>
<div class="question">
<p>Take a look at our data set and make two new plots.</p>
<ol style="list-style-type: decimal">
<li><p>Make a plot comparing groups (i.e., a categorical variable) on
one of the duration variables (i.e., a continuous variable).</p></li>
<li><p>Make a plot comparing two continuous variables.</p></li>
</ol>
</div>
<div class="question">
<p><strong>Challenge:</strong> What is one component of your plot you
would like to change? Can you look up a solution?</p>
</div>
<div class="question">
<p>See if you can recreate the plot below.<br />
<br> <strong>Hint:</strong> First try to recreate the plot with NA
values. Then, to remove <code>NA</code> values from the plot, you will
need to use both the <code>na.omit</code> and the
<code>na.rm = TRUE</code> commands.</p>
<p><img src="images/block5-2_time-alone.png" style="display: block; margin: auto;" /></p>
<pre class="r fold-hide"><code>time_alone_plot &lt;- ggplot(na.omit(js_data), aes(x = factor(timeWantAlone), y = durAlone)) +
  geom_boxplot(fill = &quot;blue&quot;, na.rm = TRUE) +
  scale_x_discrete(labels = c(
    &quot;1&quot; = &quot;Would like more time alone&quot;,
    &quot;2&quot; = &quot;Do not want more time alone&quot;
  )) +
  labs(
    title = &quot;Distribution of Time Spent Alone by Desire to Be Alone&quot;,
    x = &quot;Desire to Spend Time Alone&quot;,
    y = &quot;Duration Spent Alone - Minutes&quot;
  )</code></pre>
</div>
<div class="question">
<p>See if you can recreate the plot below.</p>
<p><br></p>
<p><strong>Hint:</strong> This type of chart is called a “proportional
bar chart”, and search engines are your best friend!</p>
<p><img src="images/block5-2_prov-edu.png" style="display: block; margin: auto;" /></p>
<pre class="r fold-hide"><code>prov_edu_plot &lt;- ggplot(js_data, aes(x = province_fact, fill = eduLevel_fact)) +
  geom_bar(position = &quot;fill&quot;) +
  labs(
    title = &quot;Proportion of Education Levels by Province&quot;,
    x = &quot;Province&quot;,
    y = &quot;Proportion&quot;,
    fill = &quot;Education Level&quot;
  ) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
</div>
</div>
<div id="save-your-work" class="section level2">
<h2>Save Your Work</h2>
<p>We didn’t make any changes to the data in this session, but we did
create a new R script. Save that script and back it up to OSF.</p>
<p><img src="images/osf/osfUpload.gif" /></p>
</div>
<div id="update-documentation" class="section level2">
<h2>Update Documentation</h2>
<p>We’ve added a new file to our project, so we’ll also need to update
the README document to reflect this.</p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiVmlzdWFsaXphdGlvbiB3aXRoIGdncGxvdGxvdCIKcGFnZXRpdGxlOiAiVmlzdWFsaXphdGlvbiB3aXRoIGdncGxvdCIKb3V0cHV0OgogIGh0bWxfZG9jdW1lbnQ6CiAgICBjb2RlX2ZvbGRpbmc6IHNob3cgIyBhbGxvd3MgdG9nZ2xpbmcgb2Ygc2hvd2luZyBhbmQgaGlkaW5nIGNvZGUuIFJlbW92ZSBpZiBub3QgdXNpbmcgY29kZS4KICAgIGNvZGVfZG93bmxvYWQ6IHRydWUgIyBhbGxvd3MgdGhlIHVzZXIgdG8gZG93bmxvYWQgdGhlIHNvdXJjZSAuUm1kIGZpbGUuIFJlbW92ZSBpZiBub3QgdXNpbmcgY29kZS4KICAgIGluY2x1ZGVzOgogICAgICBhZnRlcl9ib2R5OiBmb290ZXIuaHRtbCAjIGluY2x1ZGUgYSBjdXN0b20gZm9vdGVyLgogICAgdG9jOiB0cnVlCiAgICB0b2NfZGVwdGg6IDMKICAgIHRvY19mbG9hdDoKICAgICAgY29sbGFwc2VkOiBmYWxzZQogICAgICBzbW9vdGhfc2Nyb2xsOiBmYWxzZQotLS0KCmBgYHtyLCBsaWJyYXJpZXMsIGluY2x1ZGUgPSBGQUxTRX0KbGlicmFyeShrYWJsZUV4dHJhKQpsaWJyYXJ5KGdncGxvdDIpCmxpYnJhcnkoZHBseXIpCmBgYAoKYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9CmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSwgbWVzc2FnZSA9IEZBTFNFLCB3YXJuaW5ncyA9IEZBTFNFKQpgYGAKCgojIyMgVmlzdWFsaXphdGlvbnMgd2l0aCBnZ3Bsb3QyCgpOb3cgdGhhdCB3ZSBoYXZlIG91ciBkYXRhIHZpc3VhbGl6YXRpb24gaW1hZ2luYXRpb25zIGdvaW5nLCBsZXQncyBnZXQgaW50byBob3cgd2UgY2FuIHZpc3VhbGx5IHJlcHJlc2VudCBvdXIgZGF0YSBpbiBSLgoKVGhlIGdvLXRvIHBhY2thZ2UgZm9yIGRhdGEgdmlzdWFsaXphdGlvbiBpbiBSIGlzIGBnZ3Bsb3QyYCwgd2hpY2ggaXMgcGFydCBvZiB0aGUgdGlkeXZlcnNlLiBZb3UgY2FuIGZpbmQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBgZ2dwbG90MmAgb24gdGhlIDxhIGhyZWY9Imh0dHBzOi8vZ2dwbG90Mi50aWR5dmVyc2Uub3JnLyI+dGlkeXZlcnNlIHdlYnNpdGU8L2E+LgoKVGhpcyBwYWNrYWdlIGFwcHJvYWNoZXMgZGF0YSB2aXN1YWxpemF0aW9uIHRocm91Z2ggImEgZ3JhbW1hciBvZiBncmFwaGljcy4iIEluIG90aGVyIHdvcmRzLCB1c2luZyB0aGUgc2FtZSBzeW50YXgsIHlvdSBjYW4gY3JlYXRlIGFuIGluZmluaXRlIG51bWJlciBvZiBkYXRhIHZpc3VhbGl6YXRpb25zLiBBbHRob3VnaCB0aGVyZSBhcmUgYSBsb3Qgb2YgZnVuY3Rpb25zIGFuZCBjb21wb25lbnRzIHRvIGxlYXJuIGF0IGZpcnN0LCBvbmNlIHlvdSB1bmRlcnN0YW5kIHRoZSBvdmVyYWxsIHN0cnVjdHVyZSBvZiBidWlsZGluZyBncmFwaGljcyBpbiBgZ2dwbG90MmAsIHlvdSBjYW4gcmVwbGljYXRlIGFuZCBleHBhbmQgb24gdGhpcyBzdHJ1Y3R1cmUgdG8gdmlzdWFsaXplIGRhdGEgaW4gYW4gdW5saW1pdGVkIG51bWJlciBvZiB3YXlzLiAKCiMjIyBDcmVhdGUgYSBOZXcgU2NyaXB0CgpMZXQncyBzdGFydCBieSBjcmVhdGluZyBhIG5ldyBzY3JpcHQuCgohW10oaW1hZ2VzL2Jsb2NrM19jcmVhdGUtci1zY3JpcHQuZ2lmKQoKSWYgeW91IGhhdmUgaW5zdGFsbGVkIHRoZSB0aWR5dmVyc2UsIHRoZW4gYGdncGxvdDJgIGlzIGluY2x1ZGVkLiBPdGhlcndpc2UgeW91IGNhbiBpbnN0YWxsIGl0IG5vdy4gTGV0J3MgYWxzbyBsb2FkIG91ciBkYXRhc2V0IGZvciB0b2RheS4KCmBgYHtyfQojaW5zdGFsbC5wYWNrYWdlcygiZ2dwbG90MiIpCiNsaWJyYXJ5KGdncGxvdDIpCmBgYAoKOjo6bm90ZQpMZXQncyBhbHNvIGxvYWQgb3VyIGRhdGFzZXQuICBGb3IgdGhpcyBleGVyY2lzZSwgd2UgYXJlIHVzaW5nIGEgZGF0YXNldCB0aGF0IGlzIGV4YWN0bHkgdGhlIHNhbWUgYXMgdGhlIG9uZSB0aGF0IHdhcyBwcm9kdWNlZCBpbiB0aGUgc2Vzc2lvbiAqKkRhdGEgVHlwZXMgYW5kIFN0cnVjdHVyZXMqKiwgYnV0IHRoYXQgaGFzIG9uZSBleHRyYSB2YXJpYWJsZSBhZGRlZCBjYWxsZWQgYGlzRmVlbFJ1c2hlZGAuICBUaGlzIHZhcmlhYmxlIGlzIGRlcml2ZWQgZnJvbSB0aGUgYGZlZWxSdXNoZWRgIHZhcmlhYmxlLCB3aXRoIHRoZSBudW1iZXIgYDFgIGluZGljYXRpbmcgdGhhdCBzb21lYm9keSBmZWVscyBydXNoZWQsIGFuZCBgMGAgaW5kaWNhdGluZyB0aGV5IGRvIG5vdCBmZWVsIHJ1c2hlZC4gIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoaXMgdmFyaWFibGUgYW5kIGhvdyBpdCB3YXMgY3JlYXRlZCwgc2VlIHRoZSBzZXNzaW9uIFtSOiBGaWx0ZXIgYW5kIFNlbGVjdF0oaHR0cHM6Ly9hbGxpYW5jZS1yZG0tZ2RyLmdpdGh1Yi5pby9yZG0tanVtcHN0YXJ0LzMtQUNULTMtRmlsdGVyU2VsZWN0Lmh0bWwpCgo6OjoKCmBgYHtyfQpsb2FkKCJkYXRhL2Jsb2NrLTVfdmlzdWFsaXphdGlvbi5SRGF0YSIpCmBgYAoKVGhlcmUgYXJlIG1hbnkgd2F5cyB0byBtYWtlIGRhdGEgdmlzdWFsaXphdGlvbnMgaW4gUjsgaG93ZXZlciwgb3RoZXIgYXBwcm9hY2hlcyB0ZW5kIHRvIGJlIG1vcmUgYXV0b21hdGljIGFuZCBjb25zZXF1ZW50bHkgbGltaXQgdGhlIGFtb3VudCB5b3UgY2FuIGNoYW5nZSBhbmQgYWRhcHQgeW91ciB2aXN1YWxpemF0aW9uIHRvIHlvdXIgbmVlZHMuIGBnZ3Bsb3QyYCB3b3JrcyBpbiBsYXllcnMsIGFsbG93aW5nIGZvciBtYXhpbXVtIGNvbnRyb2wgYW5kIGZsZXhpYmlsaXR5LiAKCkhlcmUgYXJlIHNvbWUgb2YgdGhlIG1vc3QgY29tbW9uIGxheWVycyAoaS5lLiwgZnVuY3Rpb25zKSB1c2VkIGluIGBnZ3Bsb3QyYC4gVHlwaWNhbGx5IHlvdSBjb25uZWN0IHRoZXNlIGxheWVycyB1c2luZyB0aGUgYCtgIHN5bWJvbC4gVGhlcmUgaXMgb2Z0ZW4gbW9yZSB0aGFuIG9uZSB3YXkgdG8gYnVpbGQgdGhlIHNhbWUgcGxvdCB3aXRoIHRoZSBgZ2dwbG90YCBwYWNrYWdlLiAKCioqLSBgZ2dwbG90KClgOioqIGhvdyB5b3Ugd2lsbCBzdGFydCBtb3N0IHBsb3RzIHlvdSBidWlsZCBpbiBgZ2dwbG90MmAuIFRoZSByZXN0IG9mIHRoZSBpbmZvcm1hdGlvbiBnb2VzIHdpdGhpbiB0aGlzIGZ1bmN0aW9uLgoKKiotIGBhZXMoKWA6KiogdGhpcyBpcyB0aGUgYWVzdGhldGljIG1hcHBpbmcgZnVuY3Rpb24sIGluIHdoaWNoIHlvdSBjYW4gY29udHJvbCBhZXN0aGV0aWMgY29tcG9uZW50cyBvZiB0aGUgcGxvdC4gWW91IGNhbiBhZGQgY29sb3JzLCBheGlzIGxhYmVscywgZm9udCBzaXplcyBhbmQgbW9yZSB3aXRoaW4gdGhpcyBmdW5jdGlvbi4gQ29sb3IgYW5kIHNoYXBlIGNhbiBiZSBkZWZpbmVkIGJvdGggd2l0aGluIGFuZCBvdXRzaWRlIG9mIHRoZSBhZXN0aGV0aWMgZnVuY3Rpb24uIAoKKiotIGBnZW9tX3BvaW50KClgOioqIHVzZWQgZm9yIG1ha2luZyBhIHNjYXR0ZXIgcGxvdAoKKiotIGBnZW9tX2xpbmUoKWA6KiogdXNlZCBmb3IgYWRkaW5nIGEgbGluZSB0byBhIHBsb3QKCioqLSBgZ2VvbV9oaXN0b2dyYW0oKWA6KiogdXNlZCBmb3IgbWFraW5nIGEgaGlzdG9ncmFtCgoqKi0gYGdlb21fY29sKClgOioqIHVzZWQgZm9yIG1ha2luZyBhIGJhciBwbG90CgoqKi0gYHhsYWJgLCBgeWxhYmAsIGFuZCBgbGFicyh0aXRsZSA9IClgOioqIHVzZWQgZm9yIGFkZGluZyBheGlzIGxhYmVscyBhbmQgYW4gb3ZlcmFsbCB0aXRsZSB0byBwbG90cwoKKiotIGBjb2xvcmA6KiogYXNzaWducyBhIGNvbG9yIHRvIHBhcnQgb2YgdGhlIHBsb3QsIHN1Y2ggYXMgZGlmZmVyZW50IGdyb3VwcyBvciB0aGUgZGF0YSBwb2ludHMKCioqLSBgZmlsbGA6KiogYXNzaWducyB0aGUgaW50ZXJpb3IgY29sb3Igb2YgcGFydCBvZiB0aGUgcGxvdCwgc3VjaCBhcyBhIGNvbmZpZGVuY2UgYmFuZCBvciB0aGUgYmFycyBpbiBiYXIgcGxvdHMKCioqLSBgYWxwaGFgOioqIHVzZWQgdG8gY2hhbmdlIHRoZSB0cmFuc3BhcmVuY3kgb2YgYSBjb21wb25lbnQgb2YgdGhlIHBsb3QuIFVzZWZ1bCBpZiB5b3UgbG90cyBvZiBoYXZlIG92ZXJsYXBwaW5nIGRhdGEgcG9pbnRzIG9yIGRpc3RyaWJ1dGlvbnMgZnJvbSBtdWx0aXBsZSBncm91cHMuIAoKKiotIGBzaXplYDoqKiB1c2VkIHRvIHNldCB0aGUgc2l6ZSBvZiBwYXJ0IG9mIHRoZSBwbG90LCBzdWNoIGFzIGhvdyBiaWcgdGhlIGRhdGEgcG9pbnRzIG9yIHRleHQgc2hvdWxkIGJlCgpUaGVyZSBhcmUgbWFueSBtb3JlIGRhdGEgdmlzdWFsaXphdGlvbiBvcHRpb25zIGluIGBnZ3Bsb3RgIGJ1dCB0byBnZXQgc3RhcnRlZCB0b2RheSB3ZSBhcmUgZ29pbmcgdG8gZm9jdXMgb24gbWFraW5nIGEgYmFyIHBsb3QgKGdvb2QgZm9yIGNhdGVnb3JpY2FsIGRhdGEpIGFuZCBhIHNjYXR0ZXIgcGxvdCAoZ29vZCBmb3IgY29udGludW91cyBkYXRhKS4gCgoKIyMjIEJhc2ljIEJhciBQbG90OiBDb3VudHMKTGV0J3MgbWFrZSBvdXIgZmlyc3QgcGxvdCBpbiBSISBXZSBhcmUgZ29pbmcgdG8gc2xvd2x5IGFkZCBsYXllcnMsIGJ1aWxkaW5nIHVwIHRvIGEgYm94IHBsb3QgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgcGVvcGxlIGluIGVhY2ggZ3JvdXAgaW4gdGhlIGBpc0ZlZWxSdXNoZWRgIHZhcmlhYmxlLgoKV2hlbiBjcmVhdGluZyB2aXN1YWxpemF0aW9ucywgaXQncyBhbHdheXMgZ29vZCB0byBoYXZlIGEgc2Vuc2Ugb2YgdGhlIHZhcmlhYmxlcyB5b3UncmUgd29ya2luZyB3aXRoLiAgSXQgY2FuIGJlIGhlbHBmdWwgdG8gdXNlIHRoZSBgVmlldygpYCBjb21tYW5kIHdlIGRpc2N1c3NlZCBpbiB0aGUgc2Vzc2lvbiAqKkZpcnN0IFN0ZXBzIGluIFIqKjoKCmBgYHtyLCByZXN1bHRzID0gJ2hpZGUnfQpWaWV3KGpzX2RhdGEpCmBgYAoKSXQgY2FuIGFsc28gYmUgaGVscGZ1bCB0byBoYXZlIHRoZSBkYXRhIGRpY3Rpb25hcnkgaGFuZHksIHNvIHlvdSBrbm93IGVhY2ggdmFyaWFibGUncyBkYXRhIHR5cGUgYW5kIGRlc2NyaXB0aW9uOgoKYGBge3IsIGVjaG89RkFMU0UsIG91dC53aWR0aD0iOTUlIiwgb3V0LmhlaWdodD0iNTAwaW4ifQogICAga25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy9CbG9jazQtMl9EaWN0aW9uYXJ5LnBkZiIpCmBgYAoKPGJyPgoKRmlyc3Qgd2UgY3JlYXRlIHRoZSBibGFuayBwbG90IG9uIHdoaWNoIHdlIHdpbGwgYWRkIG91ciBkYXRhLiBXZSBuZWFybHkgYWx3YXlzIHN0YXJ0IHdpdGggdGhlIGZ1bmN0aW9uIGBnZ3Bsb3RgIGFuZCB0aGVuIHRlbGxpbmcgdGhlIGZ1bmN0aW9uIHdoYXQgZGF0YXNldCB0byB1c2UuIAoKYGBge3J9CmdncGxvdChqc19kYXRhKQpgYGAKClRoaXMgY3JlYXRlcyBvdXIgYmxhbmsgY2FudmFzLgoKTmV4dCB3ZSB0ZWxsIGdncGxvdCB3aGF0IHZhcmlhYmxlIHdlIHdhbnQgdG8gdXNlIGFuZCBwdXQgaXQgaW4gdGhlIGBhZXMoKWAgZnVuY3Rpb24uIElmIHlvdSB3YW50IGEgYmFyIGNoYXJ0IHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIHBlb3BsZSBpbiBlYWNoIGdyb3VwLCB5b3UgY2FuIGFkZCBqdXN0IG9uZSB2YXJpYWJsZSB0byB0aGUgYGFlcygpYCBmdW5jdGlvbi4gV2UgaW5jbHVkZSB0aGUgYGFzLmZhY3RvcmAgZnVuY3Rpb24gYXJvdW5kIHRoZSBgaXNGZWVsUnVzaGVkYCB2YXJpYWJsZSBzbyBpdCBpcyB0cmVhdGVkIGFzIGEgY2F0ZWdvcmljYWwgdmFyaWFibGUgZm9yIHRoZSBib3ggcGxvdCBpbnN0ZWFkIG9mIGEgbnVtZXJpYyB2YXJpYWJsZS4gCgpgYGB7cn0KZ2dwbG90KGpzX2RhdGEsIGFlcyh4ID0gYXMuZmFjdG9yKGlzRmVlbFJ1c2hlZCkpKQpgYGAKCllvdSBub3cgc2VlIHRoYXQgdGhlIGdyaWQgcmVwcmVzZW50cyBhIHNjYWxlIHJlbGV2YW50IHRvIHRoYXQgdmFyaWFibGUuIAoKTmV4dCwgd2UgdGVsbCBnZ3Bsb3Qgd2hhdCB0eXBlIG9mIGRhdGEgdmlzdWFsaXphdGlvbiB3ZSB3YW50LiBUbyBjcmVhdGUgYSBiYXIgY2hhcnQgd2UgdXNlIHRoZSBmdW5jdGlvbiBgZ2VvbV9iYXIoKWAuIFRvIHNlZSBob3cgbWFueSBwZW9wbGUgYXJlIGluIGVhY2ggb2YgdGhlIGBpc0ZlZWxSdXNoZWRgIGdyb3Vwcywgd2UgdXNlIHRoZSBkZWZhdWx0IGBnZW9tX2JhcihzdGF0ID0gImNvdW50IilgLiBSZW1lbWJlciB0aGF0IHdlIGNvbm5lY3QgbGF5ZXJzIHdpdGggYSBgK2Agc3ltYm9sLiAKCmBgYHtyfQpnZ3Bsb3QoanNfZGF0YSwgYWVzKHggPSBhcy5mYWN0b3IoaXNGZWVsUnVzaGVkKSkpICsKICBnZW9tX2JhcihzdGF0ID0gImNvdW50IikKYGBgCgpXZSd2ZSBnb3QgYSBiYXIgY2hhcnQhCgpMYXN0bHksIGxldCdzIGFkZCBzb21lIGxhYmVscyB0byB0aGUgeC1heGlzIGFuZCB5LWF4aXMgdG8gbWFrZSBpdCBjbGVhciB3aGF0IGlzIGJlaW5nIHBsb3R0ZWQuIAoKYGBge3J9CmdncGxvdChqc19kYXRhLCBhZXMoeCA9IGFzLmZhY3Rvcihpc0ZlZWxSdXNoZWQpKSkgKwogIGdlb21fYmFyKHN0YXQgPSAiY291bnQiKSArIAogIHhsYWIoIkZlZWxpbmcgUnVzaGVkIikgKwogIHlsYWIgKCJOdW1iZXIgb2YgUGFydGljaXBhbnRzIikgCmBgYAoKIyMjIEJhc2ljIEJhciBQbG90OiBHcm91cCBNZWFucwoKTm93LCBsZXQncyBzZWUgaWYgcGVvcGxlIHdobyBmZWVsIHJ1c2hlZCB0ZW5kIHRvIHdvcmsgbW9yZSB0aGFuIHBlb3BsZSB3aG8gZG8gbm90IGZlZWwgcnVzaGVkLiBUbyByZXByZXNlbnQgdGhlIG1lYW4gZm9yIGVhY2ggZ3JvdXAgb3Igc29tZSBvdGhlciB2YXJpYWJsZSwgeW91IGFkZCBib3RoIGFuIHggYW5kIGEgeSB2YXJpYWJsZSB0byB0aGUgYGFlcygpYCBmdW5jdGlvbiBhbmQgdXNlIHRoZSBgZ2VvbV9iYXIoc3RhdCA9ICJzdW1tYXJ5IilgLiBOb3RlIHRoYXQgdGhlIFktYXhpcyBzY2FsZSBoYXMgbm93IGFkanVzdGVkIHRvIGEgc2NhbGUgdGhhdCBtYXRjaGVzIHRoZSB2YXJpYWJsZSB3ZSBhcmUgdXNpbmcgKGkuZS4sIG1lYW4gbnVtYmVyIG9mIG1pbnV0ZXMgc3BlbnQgd29ya2luZyBmb3IgZWFjaCBncm91cCkuIAoKYGBge3J9CmdncGxvdChqc19kYXRhLCBhZXMoeCA9IGFzLmZhY3Rvcihpc0ZlZWxSdXNoZWQpLCB5ID0gZHVyV29yaykpICsKICBnZW9tX2JhcihzdGF0ID0gInN1bW1hcnkiKSArIAogIHhsYWIoIkZlZWxpbmcgUnVzaGVkIikgKwogIHlsYWIgKCJBdmVyYWdlIE1pbnV0ZXMgV29ya2luZyIpIApgYGAKCjo6OndhbGt0aHJvdWdoCiAgLSBNb3N0IHBsb3RzIHdpbGwgc3RhcnQgd2l0aCB0aGUgYGdncGxvdCgpYGZ1bmN0aW9uCiAgLSBZb3UgaGF2ZSB0byBpbmNsdWRlIHRoZSBvYmplY3Qgd2hlcmUgYGdncGxvdCgpYCB3aWxsIGdldCB0aGUgaW5mb3JtYXRpb24gZm9yIHRoZSBwbG90IGZyb20uIEluIHRoaXMgY2FzZSwgaXQncyBvdXIgZGF0YXNldCBganNfZGF0YWAKICAtIFdpdGhpbiB0aGUgYGFlcygpYCBmdW5jdGlvbiwgd2UgaWRlbnRpZnkgd2hhdCB0aGUgeCBhbmQgeSB2YXJpYWJsZXMgYXJlIGZvciB0aGlzIHBsb3QKICAtIFdlIGFkZCBsYXllcnMgdXNpbmcgdGhlIGArYCBzaWduCiAgLSBOZXh0IHdlIHRlbGwgYGdncGxvdCgpYCB3aGF0IHR5cGUgb2YgcGxvdCB3ZSBhcmUgbWFraW5nOyBpbiB0aGlzIGNhc2Ugd2UgYXJlIGNyZWF0aW5nIGEgYmFyIHBsb3QgdXNpbmcgdGhlIGZ1bmN0aW9uIGBnZW9tX2JhcigpYAogIC0gVGhlbiB3ZSBhZGQgd2hhdCB0eXBlIG9mIHN0YXRpc3RpYyB3ZSB3YW50IHByZXNlbnRlZCBvbiB0aGUgcGxvdC4gSGVyZSB3ZSBhc2sgZm9yIHRoZSBtZWFuIG9mIGVhY2ggZ3JvdXAgZm9yIHRoZSB2YXJpYWJsZSBkdXJXb3JrIHVzaW5nIHRoZSBmdW5jdGlvbiBgZ2VvbV9iYXIoc3RhdCA9ICJzdW1tYXJ5IilgCiAgLSBXZSBhZGQgYSBsYWJlbCB0byB0aGUgeC1heGlzIHdpdGggYGxhYigiRmVlbGluZyBSdXNoZWQiKWAKICAtIFdlIGFkZCB0aGUgbGFiZWwgdG8gdGhlIHktYXhpcyB3aXRoIGB5bGFiICgiVGltZSBXb3JraW5nIilgCiAgCjo6OgoKIyMjIEltcHJvdmVkIEJveCBQbG90ISAKVGhpcyBwbG90IGdldHMgdGhlIGlkZWEgYWNyb3NzLCBidXQgd2UgY2FuIGFkZCBtb3JlIGxheWVycyBhbmQgZnVuY3Rpb25zIHRvIG1ha2UgbW9yZSBhZGp1c3RtZW50cy4gU2VlIHRoZSB3YWxrdGhyb3VnaCBiZWxvdyBmb3IgaG93IHdlIG1hZGUgYWxsIHRoZXNlIGNoYW5nZXMuCgpgYGB7cn0KCnBsb3RsYWJlbHMgPC0gYygiTm90IFJ1c2hlZCIsICJSdXNoZWQiLCAiRGlkIE5vdCBSZXNwb25kIikKCmdncGxvdChqc19kYXRhLCBhZXMoeCA9IGFzLmZhY3Rvcihpc0ZlZWxSdXNoZWQpLCB5ID0gZHVyV29yaykpICsKICBnZW9tX2JhcihzdGF0ID0gInN1bW1hcnkiLCBmaWxsID0gIiMyRDVFN0YiKSArIAogIHhsYWIoIkZlZWxpbmcgUnVzaGVkIikgKwogIHlsYWIgKCJBdmVyYWdlIE1pbnV0ZXMgV29ya2luZyIpICsKICBsYWJzKHRpdGxlID0gIldvcmtpbmcgYW5kIEZlZWxpbmcgUnVzaGVkIikgKwogIHNjYWxlX3hfZGlzY3JldGUobGFiZWxzID0gcGxvdGxhYmVscykgKwogIHRoZW1lKHRleHQgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDE4KSwKICAgICAgICBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChhbmdsZSA9IDI1LCBoanVzdCA9IDEpKQogIApgYGAKCjo6OndhbGt0aHJvdWdoCiAgLSBXZSBjYW4gY2hhbmdlIHRoZSBjb2xvciBvZiB0aGUgYmFycyB1c2luZyBgZmlsbCA9IGAuIEhlcmUgd2UgYWRkZWQgdGhlIHNwZWNpZmljIGNvbG9yIHVzaW5nIGEgaGV4IGNvZGUuIEJ1dCB5b3UgY2FuIGFsc28gd3JpdGUgaW4gdGhlIG5hbWVzIG9mIGNvbG9ycyBzdWNoIGFzICJibHVlIi4KICAtIFVzaW5nIGBsYWJzKHRpdGxlID0gIiIpYCB3ZSBhZGRlZCBhbiBvdmVyYWxsIHRpdGxlIHRvIHRoZSBwbG90CiAgLSBXZSBwcm9iYWJseSB3YW50IHRvIGluZGljYXRlIHdoYXQgZWFjaCBjYXRlZ29yeSByZXByZXNlbnRzLCByYXRoZXIgdGhhbiB0aGUgIjAiLCAiMSIgYW5kICJOQSIgbGFiZWxzLiBUbyBhZGQgdGV4dCBsYWJlbHMsIHdlIGZpcnN0IGNyZWF0ZSBhbiBvYmplY3Qgd2l0aCBlYWNoIG9mIHRob3NlIGxhYmVscyBpbiBvcmRlciAoYHBsb3RsYWJlbHMgPC0gYygiTm90IFJ1c2hlZCIsICJSdXNoZWQiLCAiRGlkIE5vdCBSZXNwb25kIilgKS4gVGhlbiBpbiB0aGUgYHNjYWxlX3hfZGlzY3JldGUobGFiZWxzID0gcGxvdGxhYmVscylgIGZ1bmN0aW9uIHdlIGNhbGwgdG8gdGhhdCBvYmplY3Qgd2UgY3JlYXRlZCBhcyB0aGUgbGFiZWxzIGZvciB0aGUgeC1heGlzLiBUaGVyZSBhcmUgbWFueSBvdGhlciB3YXlzIHRvIGFkanVzdCB0aGUgbGFiZWxzIGZvciBlYWNoIGF4aXMsIGJ1dCB0aGlzIG1ldGhvZCB3b3JrcyB3ZWxsIGZvciBhIHNtYWxsIG51bWJlciBvZiBncm91cHMuCiAgLSBJbiB0aGUgYHRoZW1lKClgIGxheWVyIHlvdSBjYW4gYWRkIG1hbnkgZGlmZmVyZW50IHNwZWNpZmljYXRpb25zLiBIZXJlIHdlIGFkZGVkIGB0ZXh0ID0gZWxlbWVudF90ZXh0KHNpemUgPSAxOClgIHRvIG1ha2UgdGhlIHRleHQgc2l6ZSBiaWdnZXIgdGhhbiB0aGUgZGVmYXVsdCBhbmQgbWFkZSB0aGUgeC1heGlzIGxhYmVscyBhbmdsZWQgc28gdGhleSBmaXQgYmV0dGVyIHVzaW5nIGBheGlzLnRleHQueCA9IGVsZW1lbnRfdGV4dChhbmdsZSA9IDI1LCBoanVzdCA9IDEpYC4gVGhlIGBoanVzdCA9IGAgYWRqdXN0cyB0aGUgdmVydGljYWwgbG9jYXRpb24gb2YgdGhlIGF4aXMgbGFiZWxzIHNvIHRoZXkgZG9uJ3Qgb3ZlcmxhcCB3aXRoIHRoZSBwbG90IGl0c2VsZi4gYHZqdXN0ID0gYCBjYW4gYmUgdXNlZCB0byBtb3ZlIHRoZSBsYWJlbHMgcmlnaHQgYW5kIGxlZnQuIAogIAo6OjoKCjo6OnF1ZXN0aW9uClRyeSBtYW5pcHVsYXRpbmcgdGhpcyBwbG90IGluIHNvbWUgd2F5LiBDYW4geW91IGNoYW5nZSB0aGUgY29sb3Igb2YgdGhlIGJhcnM/IFdoYXQgaGFwcGVucyBpZiB5b3UgY2hhbmdlIGBhbmdsZSA9IDkwYD8KOjo6CgojIyMgQmFzaWMgU2NhdHRlciBQbG90Ck5vdyBsZXQncyBtYWtlIGEgc2NhdHRlciBwbG90IHRvIHZpc3VhbGl6ZSB0d28gY29udGludW91cyB2YXJpYWJsZXMuIFdlIGFyZSBnb2luZyB0byBjaGVjayBpZiBpdCBsb29rcyBsaWtlIHRoZXJlIGlzIGEgY29ycmVsYXRpb24gYmV0d2VlbiBob3cgbXVjaCB0aW1lIHBlb3BsZSB3b3JrIChkdXJXb3JrKSBhbmQgaG93IG11Y2ggdGhleSBzbGVlcCAoZHVyU2xlZXApLgoKYGBge3J9CmdncGxvdChqc19kYXRhLCBhZXMoZHVyV29yaywgZHVyU2xlZXApKSArCiAgZ2VvbV9wb2ludCgpICsKICBnZW9tX3Ntb290aCgpICsKICB4bGFiKCJNaW51dGVzIFNwZW50IFdvcmtpbmciKSArCiAgeWxhYiAoIk1pbnV0ZXMgU3BlbnQgU2xlZXBpbmciKQogICAgICAKYGBgCgo6Ojp3YWxrdGhyb3VnaAogIC0gQWdhaW4gd2Ugc3RhcnQgd2l0aCB0aGUgYGdncGxvdCgpYCBmdW5jdGlvbiwgaW5jbHVkaW5nIHRlbGxpbmcgaXQgdG8gdXNlIHRoZSBkYXRhc2V0IGBqc19kYXRhYAogIC0gSW4gdGhlIGBhZXMoKWAgZnVuY3Rpb24gd2UgbGlzdCB0aGUgeCBhbmQgeSB2YXJpYWJsZXMgKGhlcmUgZHVyV29yayBhbmQgZHVyU2xlZXApCiAgLSBUaGUgYGdlb21fcG9pbnQoKWAgZnVuY3Rpb24gaXMgd2hhdCBtYWtlcyBhIHNjYXR0ZXIgcGxvdAogIC0gVGhlIGdlb21fc21vb3RoKCkgaXMgd2hhdCBhZGRzIHRoZSBjb3JyZWxhdGlvbiBsaW5lIHRvIHRoZSBwbG90CiAgLSBUaGUgYHhsYWIoKWAgYW5kIGB5bGFiKClgIGFkZCB0aGUgeC1heGlzIGFuZCB5LWF4aXMgbGFiZWxzIHRvIHRoZSBwbG90CiAgCjo6OgojIyMgSW1wcm92ZWQgU2NhdHRlciBQbG90IQoKTm93IGxldCdzIGFkZCBzb21lIGxheWVycyBhbmQgYWVzdGhldGljIGFkanVzdG1lbnRzIHRvIGltcHJvdmUgdGhpcyBwbG90LgoKYGBge3J9CmdncGxvdChqc19kYXRhLCBhZXMoZHVyV29yaywgZHVyU2xlZXApKSArCiAgZ2VvbV9wb2ludChjb2xvciA9ICIjMkQ1RTdGIiwgYWxwaGEgPSAuMikgKwogIGdlb21fc21vb3RoKG1ldGhvZCA9IGxtLCBjb2xvciA9ICJibGFjayIpICsKICB4bGFiKCJNaW51dGVzIFNwZW50IFdvcmtpbmciKSArCiAgeWxhYiAoIk1pbnV0ZXMgU3BlbnQgU2xlZXBpbmciKSArCiAgc2NhbGVfeF9jb250aW51b3VzKGJyZWFrcyA9IHNlcSgwLCAxNTAwLCAyNTApKSArCiAgbGFicyh0aXRsZSA9ICJBc3NvY2lhdGlvbiBCZXR3ZWVuIFdvcmtpbmcgYW5kIFNsZWVwaW5nIikgKwogIHRoZW1lKHRleHQgPSBlbGVtZW50X3RleHQoc2l6ZSA9IDE4KSkKYGBgCgo6Ojp3YWxrdGhyb3VnaAogIC0gV2UgY2FuIGNoYW5nZSB0aGUgY29sb3Igb2YgdGhlIGRhdGEgcG9pbnRzIGJ5IGFkZGluZyBgY29sb3IgPSAiIzJENUU3RiJgIGFuZCBjaGFuZ2UgdGhlIHRyYW5zcGFyZW5jeSBvZiB0aGUgZGF0YSBwb2ludHMgKHNvIHlvdSBjYW4gc2VlIHdoZXJlIHRoZXJlIGFyZSBvdmVybGFwcGluZyBjbHVzdGVycykgd2l0aCB0aGUgYWRkaXRpb24gb2YgYGFscGhhID0gLjJgLiAKICAtIEluIHRoZSBgZ2VvbV9zbW9vdGgoKWAgZnVuY3Rpb24gd2UgY2hhbmdlZCB0aGUgbWV0aG9kIGZvciBjYWxjdWxhdGluZyB0aGUgbGluZSB0byBiZSBsaW5lYXIgKGluc3RlYWQgb2YgdGhlIGdncGxvdCBkZWZhdWx0KSB1c2luZyBgbWV0aG9kID0gbG1gIGFuZCBhZGp1c3RlZCB0aGUgY29sb3Igb2YgdGhlIGxpbmUgd2l0aCBgY29sb3IgPSBgLiBSZW1lbWJlciB0aGF0IHlvdSBjYW4gd3JpdGUgaGV4IGNvZGUgbnVtYmVycyBvciB0aGUgbmFtZXMgb2YgY29sb3JzIHRvIGFkanVzdCBjb2xvcnMuIE1ha2Ugc3VyZSBib3RoIGFyZSBpbiBxdW90ZXMgdG8gYXZvaWQgZXJyb3IgbWVzc2FnZXMuIAogIC0gV2UgYWRqdXN0IHRoZSB4LWF4aXMgdGljayBtYXJrcyB3aXRoIHRoZSBgc2NhbGVfeF9jb250aW51b3VzKGJyZWFrcyA9IHNlcSgwLCAxNTAwLCAyNTApKWAgcGFydCwgd2hpY2ggdGVsbHMgUiB0byBwbG90IHRoZSB4LWF4aXMgb24gYSBzZXF1ZW5jZSBmcm9tIDAgdG8gMTUwMCAodGhpcyBjYXB0dXJlcyBhbGwgb2YgdGhlIHJlc3BvbnNlcyBpbiBvdXIgZGF0YSksIHdpdGggbGFiZWxzIGV2ZXJ5IDI1MCBtaW51dGVzLiAKICAtIFRoZSBgbGFicyh0aXRsZSA9ICJBc3NvY2lhdGlvbiBCZXR3ZWVuIFdvcmtpbmcgYW5kIFNsZWVwaW5nIilgIGFkZHMgYW4gb3ZlcmFsbCB0aXRsZSB0byB0aGUgcGxvdAogIC0gTGFzdGx5LCBgdGhlbWUodGV4dCA9IGVsZW1lbnRfdGV4dChzaXplID0gMTgpKWAgYWRqdXN0IHRoZSB0ZXh0IHNpemUKICAKOjo6Cgo6OjpxdWVzdGlvbgpUcnkgbWFuaXB1bGF0aW5nIHRoaXMgcGxvdCBpbiBzb21lIHdheS4gQ2FuIHlvdSBtYWtlIHRoZSBkYXRhIHBvaW50cyBtb3JlIGFuZCBsZXNzIHRyYW5zcGFyZW50PyBDYW4geW91IGNoYW5nZSB0aGUgY29sb3Igb2YgdGhlIGxpbmU/IFdoYXQgaGFwcGVucyBpZiB0aGUgeC1heGlzIGhhcyBsYWJlbHMgZXZlcnkgMTAwIG1pbnV0ZXM/Cjo6OgoKIyMjIFlvdXIgVHVybiEKCjo6Om5vdGUKCkZvciB0aGUgZm9sbG93aW5nIHF1ZXN0aW9ucywgdGhlIGdvYWwgaXMgdG8gZ2V0IHlvdSB0aGlua2luZyBhYm91dCB0aGUgYnVpbGRpbmcgYmxvY2tzIHRoYXQgZ28gaW50byBtYWtpbmcgYSB2aXN1YWwuICBEb24ndCBnZXQgdG9vIGZvY3VzZWQgb24gdGhlIGZpbmlzaGVkIHByb2R1Y3QgcmlnaHQgYXdheSwgYW5kIHRyeSB0byB0aGluayBhYm91dCB0aGUgaW5kaXZpZHVhbCBzdGVwcyBuZWVkZWQgdG8gZ2V0IHlvdSB0byB0aGVyZS4gIEFzIHdpdGggYW55IGNvZGluZyB0YXNrLCBpdCBjYW4gYmUgdmVyeSBoZWxwZnVsIHRvIHRoaW5rIG9mIG9yIHdyaXRlIGVhY2ggb2YgdGhlIHN0ZXBzIGRvd24gaW4gcGxhaW4gRW5nbGlzaCwgdGhlbiB3b3JrIHRocm91Z2ggZWFjaCBvbmUuICAKCkFzIGEgZmluYWwgbm90ZSwgYSAqKmh1Z2UqKiBwYXJ0IG9mIGxlYXJuaW5nIGhvdyB0byBjb2RlIGlzIHVzaW5nIHNlYXJjaCBlbmdpbmVzLCBhbmQgdGhlcmUgaXMgYSB0b24gb2YgZG9jdW1lbnRhdGlvbiBvdXQgdGhlcmUgdG8gaGVscCB5b3UuICBUaGlzIGFsc28gcmVsYXRlcyBiYWNrIHRvIHB1dHRpbmcgdGhpbmdzIGludG8gcGxhaW4tbGFuZ3VhZ2Ugc3RlcHMsIGJlY2F1c2UgYmVpbmcgYWJsZSB0byBjbGVhcmx5IGFydGljdWxhdGUgeW91ciBnb2FscyBpcyBzeW5vbnltb3VzIHdpdGggdXNpbmcgZ29vZCBzZWFyY2ggdGVybXMuCgpUaGUgZGF0YSBkaWN0aW9uYXJ5IHdpbGwgYWxzbyBiZSBhbiBhc3NldCBpbiB3b3JraW5nIHRocm91Z2ggdGhpcyBleGVyY2lzZToKCmBgYHtyLCBlY2hvPUZBTFNFLCBvdXQud2lkdGg9Ijk1JSIsIG91dC5oZWlnaHQ9IjUwMGluIn0KICAgIGtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvQmxvY2s0LTJfRGljdGlvbmFyeS5wZGYiKQpgYGAKCkdvb2QgbHVjayEKCjo6OgoKCjo6OiBxdWVzdGlvbgpUYWtlIGEgbG9vayBhdCBvdXIgZGF0YSBzZXQgYW5kIG1ha2UgdHdvIG5ldyBwbG90cy4gCgoxLiBNYWtlIGEgcGxvdCBjb21wYXJpbmcgZ3JvdXBzIChpLmUuLCBhIGNhdGVnb3JpY2FsIHZhcmlhYmxlKSBvbiBvbmUgb2YgdGhlIGR1cmF0aW9uIHZhcmlhYmxlcyAoaS5lLiwgYSBjb250aW51b3VzIHZhcmlhYmxlKS4KCjIuIE1ha2UgYSBwbG90IGNvbXBhcmluZyB0d28gY29udGludW91cyB2YXJpYWJsZXMuIAo6OjoKCjo6OiBxdWVzdGlvbgoKKipDaGFsbGVuZ2U6KiogV2hhdCBpcyBvbmUgY29tcG9uZW50IG9mIHlvdXIgcGxvdCB5b3Ugd291bGQgbGlrZSB0byBjaGFuZ2U/IENhbiB5b3UgbG9vayB1cCBhIHNvbHV0aW9uPyAKOjo6CgoKOjo6cXVlc3Rpb24KU2VlIGlmIHlvdSBjYW4gcmVjcmVhdGUgdGhlIHBsb3QgYmVsb3cuICAKPGJyPgoqKkhpbnQ6KiogRmlyc3QgdHJ5IHRvIHJlY3JlYXRlIHRoZSBwbG90IHdpdGggTkEgdmFsdWVzLiAgVGhlbiwgdG8gcmVtb3ZlIGBOQWAgdmFsdWVzIGZyb20gdGhlIHBsb3QsIHlvdSB3aWxsIG5lZWQgdG8gdXNlIGJvdGggdGhlIGBuYS5vbWl0YCBhbmQgdGhlIGBuYS5ybSA9IFRSVUVgIGNvbW1hbmRzLgoKCmBgYHtyIGVjaG89RkFMU0UsIGZpZy5hbGlnbj0nY2VudGVyJ30Ka25pdHI6OmluY2x1ZGVfZ3JhcGhpY3MoImltYWdlcy9ibG9jazUtMl90aW1lLWFsb25lLnBuZyIpCmBgYAoKYGBge3IgY2xhc3Muc291cmNlID0gJ2ZvbGQtaGlkZScsIHJlc3VsdHMgPSAnaGlkZSd9CnRpbWVfYWxvbmVfcGxvdCA8LSBnZ3Bsb3QobmEub21pdChqc19kYXRhKSwgYWVzKHggPSBmYWN0b3IodGltZVdhbnRBbG9uZSksIHkgPSBkdXJBbG9uZSkpICsKICBnZW9tX2JveHBsb3QoZmlsbCA9ICJibHVlIiwgbmEucm0gPSBUUlVFKSArCiAgc2NhbGVfeF9kaXNjcmV0ZShsYWJlbHMgPSBjKAogICAgIjEiID0gIldvdWxkIGxpa2UgbW9yZSB0aW1lIGFsb25lIiwKICAgICIyIiA9ICJEbyBub3Qgd2FudCBtb3JlIHRpbWUgYWxvbmUiCiAgKSkgKwogIGxhYnMoCiAgICB0aXRsZSA9ICJEaXN0cmlidXRpb24gb2YgVGltZSBTcGVudCBBbG9uZSBieSBEZXNpcmUgdG8gQmUgQWxvbmUiLAogICAgeCA9ICJEZXNpcmUgdG8gU3BlbmQgVGltZSBBbG9uZSIsCiAgICB5ID0gIkR1cmF0aW9uIFNwZW50IEFsb25lIC0gTWludXRlcyIKICApCmBgYAoKOjo6Cgo6OjpxdWVzdGlvbgpTZWUgaWYgeW91IGNhbiByZWNyZWF0ZSB0aGUgcGxvdCBiZWxvdy4KCjxicj4KCioqSGludDoqKiBUaGlzIHR5cGUgb2YgY2hhcnQgaXMgY2FsbGVkIGEgInByb3BvcnRpb25hbCBiYXIgY2hhcnQiLCBhbmQgc2VhcmNoIGVuZ2luZXMgYXJlIHlvdXIgYmVzdCBmcmllbmQhCgpgYGB7ciBlY2hvPUZBTFNFLCBmaWcuYWxpZ249J2NlbnRlcid9CmtuaXRyOjppbmNsdWRlX2dyYXBoaWNzKCJpbWFnZXMvYmxvY2s1LTJfcHJvdi1lZHUucG5nIikKYGBgCgpgYGB7ciBjbGFzcy5zb3VyY2UgPSAnZm9sZC1oaWRlJywgcmVzdWx0cyA9ICdoaWRlJ30KcHJvdl9lZHVfcGxvdCA8LSBnZ3Bsb3QoanNfZGF0YSwgYWVzKHggPSBwcm92aW5jZV9mYWN0LCBmaWxsID0gZWR1TGV2ZWxfZmFjdCkpICsKICBnZW9tX2Jhcihwb3NpdGlvbiA9ICJmaWxsIikgKwogIGxhYnMoCiAgICB0aXRsZSA9ICJQcm9wb3J0aW9uIG9mIEVkdWNhdGlvbiBMZXZlbHMgYnkgUHJvdmluY2UiLAogICAgeCA9ICJQcm92aW5jZSIsCiAgICB5ID0gIlByb3BvcnRpb24iLAogICAgZmlsbCA9ICJFZHVjYXRpb24gTGV2ZWwiCiAgKSArCiAgdGhlbWUoYXhpcy50ZXh0LnggPSBlbGVtZW50X3RleHQoYW5nbGUgPSA0NSwgaGp1c3QgPSAxKSkKYGBgCgo6OjoKCiMjIFNhdmUgWW91ciBXb3JrCgpXZSBkaWRuJ3QgbWFrZSBhbnkgY2hhbmdlcyB0byB0aGUgZGF0YSBpbiB0aGlzIHNlc3Npb24sIGJ1dCB3ZSBkaWQgY3JlYXRlIGEgbmV3IFIgc2NyaXB0LiAgU2F2ZSB0aGF0IHNjcmlwdCBhbmQgYmFjayBpdCB1cCB0byBPU0YuCgohW10oaW1hZ2VzL29zZi9vc2ZVcGxvYWQuZ2lmKQoKCiMjIFVwZGF0ZSBEb2N1bWVudGF0aW9uCgpXZSd2ZSBhZGRlZCBhIG5ldyBmaWxlIHRvIG91ciBwcm9qZWN0LCBzbyB3ZSdsbCBhbHNvIG5lZWQgdG8gdXBkYXRlIHRoZSBSRUFETUUgZG9jdW1lbnQgdG8gcmVmbGVjdCB0aGlzLgoKCgoKCgo=</div>
<div id="footer">
    <hr />
    <div class = "inst-logos">
      <img src="images/institutions/carleton.png" />
      <img src="images/institutions/calgary.png" />
      <img src="images/institutions/ubc.png" />
      <img class="uvic"  src="images/institutions/uvic.png" />
    </div>

<br>
    <div>
      <img class = "cc-licence" src="images/institutions/CC-License.png" />
      <p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/" target ="blank">Creative Commons Attribution-NonCommercial 4.0 International License</p>
</div>
<br>
Built and rendered courtesy of <a href="https://rmarkdown.rstudio.com/index.html" target ="blank">RMarkdown from RStudio</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Block5-2_ggplot.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = false;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
